<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>🔌 ESLint x Plugins | Linter上手完全指南</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="你真了解 Liner 么？本教程将从历史演进以及上手实战来聊聊 Linter 的世界。">
    <meta name="keywords" content="eslint, prettier, linter, lint-staged, 前端, 代码风格, 上手指南">
    <meta name="author" content="海怪">
    
    <link rel="preload" href="/linter-tutorial/assets/css/0.styles.eda2f21c.css" as="style"><link rel="preload" href="/linter-tutorial/assets/js/app.ac6c6909.js" as="script"><link rel="preload" href="/linter-tutorial/assets/js/2.974bf6c6.js" as="script"><link rel="preload" href="/linter-tutorial/assets/js/10.aaf88866.js" as="script"><link rel="prefetch" href="/linter-tutorial/assets/js/11.99c5bc0e.js"><link rel="prefetch" href="/linter-tutorial/assets/js/12.efdf2c98.js"><link rel="prefetch" href="/linter-tutorial/assets/js/13.00e46a10.js"><link rel="prefetch" href="/linter-tutorial/assets/js/14.8c77d44d.js"><link rel="prefetch" href="/linter-tutorial/assets/js/15.af4d4b75.js"><link rel="prefetch" href="/linter-tutorial/assets/js/16.085aaff7.js"><link rel="prefetch" href="/linter-tutorial/assets/js/17.2c5be358.js"><link rel="prefetch" href="/linter-tutorial/assets/js/3.1da1e377.js"><link rel="prefetch" href="/linter-tutorial/assets/js/4.892d9ecf.js"><link rel="prefetch" href="/linter-tutorial/assets/js/5.d65f5d4b.js"><link rel="prefetch" href="/linter-tutorial/assets/js/6.ae0e0b10.js"><link rel="prefetch" href="/linter-tutorial/assets/js/7.80ae98bf.js"><link rel="prefetch" href="/linter-tutorial/assets/js/8.afc263d3.js"><link rel="prefetch" href="/linter-tutorial/assets/js/9.d489ecd0.js">
    <link rel="stylesheet" href="/linter-tutorial/assets/css/0.styles.eda2f21c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/linter-tutorial/" class="home-link router-link-active"><img src="/linter-tutorial/images/logo.png" alt="Linter上手完全指南" class="logo"> <span class="site-name can-hide">Linter上手完全指南</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/haixiangyan/linter-tutorial/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Issue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/haixiangyan/linter-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/haixiangyan/linter-tutorial/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Issue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/haixiangyan/linter-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>介绍</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/linter-tutorial/" aria-current="page" class="sidebar-link">🤫 前言</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>理论</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/linter-tutorial/theory/history.html" class="sidebar-link">📖 Linter的故事</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>实战</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/linter-tutorial/practice/hello_eslint.html" class="sidebar-link">👋 Hello ESLint</a></li><li><a href="/linter-tutorial/practice/eslint_prettier.html" class="sidebar-link">✍️ ESLint x Prettier</a></li><li><a href="/linter-tutorial/practice/eslint_typescript.html" class="sidebar-link">👮‍♂️ ESLint x TypeScript</a></li><li><a href="/linter-tutorial/practice/eslint_plugins.html" aria-current="page" class="active sidebar-link">🔌 ESLint x Plugins</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linter-tutorial/practice/eslint_plugins.html#eslint-x-babel" class="sidebar-link">ESLint x Babel</a></li><li class="sidebar-sub-header"><a href="/linter-tutorial/practice/eslint_plugins.html#eslint-x-react" class="sidebar-link">ESLint x React</a></li><li class="sidebar-sub-header"><a href="/linter-tutorial/practice/eslint_plugins.html#eslint-x-vue" class="sidebar-link">ESLint x Vue</a></li><li class="sidebar-sub-header"><a href="/linter-tutorial/practice/eslint_plugins.html#extends-和-plugins-的区别" class="sidebar-link">extends 和 plugins 的区别</a></li><li class="sidebar-sub-header"><a href="/linter-tutorial/practice/eslint_plugins.html#考考你" class="sidebar-link">考考你</a></li></ul></li><li><a href="/linter-tutorial/practice/stylelint.html" class="sidebar-link">🧜‍♀️ StyleLint</a></li><li><a href="/linter-tutorial/practice/husky_lint-staged.html" class="sidebar-link">🐶 Husky x LintStaged</a></li><li><a href="/linter-tutorial/practice/lint-staged_tsc.html" class="sidebar-link">🤥 LintStaged x TSC</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>最后</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/linter-tutorial/final/project.html" class="sidebar-link">💼 Github 项目</a></li><li><a href="/linter-tutorial/final/last.html" class="sidebar-link">🙌 结语</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="🔌-eslint-x-plugins"><a href="#🔌-eslint-x-plugins" class="header-anchor">#</a> 🔌 ESLint x Plugins</h1> <p>上一篇在配置 ESLint x TypeScript 时，我们发现了 Parser 和 Plugin 的规律，下面来聊聊一些常见的 Parser 和 Plugin。</p> <h2 id="eslint-x-babel"><a href="#eslint-x-babel" class="header-anchor">#</a> ESLint x Babel</h2> <p>在第一篇文章里就说了，可以通过 <code>env</code> 来设定 ESLint 的默认 ECMAScript parser 的版本，所以 ESLint 其实是自带有 parser 的，但是它只支持 <a href="https://github.com/eslint/eslint/blob/a675c89573836adaf108a932696b061946abf1e6/README.md#what-about-experimental-features" title="ESLint parser 支持最新的 ECMAScript 标准" target="_blank" rel="noopener noreferrer">最新版的 ECMAScript 标准<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>而 JavaScript 依然在不断发展，时不时又出一些新的 API 或者提案，对于要尝鲜的开发者，ESLint 的 Parser 就解析不动 <code>.js</code> 了，因此，我们需要 <a href="https://www.npmjs.com/package/@babel/eslint-parser" target="_blank" rel="noopener noreferrer">@babel/eslint-parser<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i -D @babel/core @babel/eslint-parser
</code></pre></div><p>然后添加 <code>.babelrc.js</code>，在里面写项目的 babel 规则，这里按你自己需求来就好了，我就不写啦。</p> <p>然后在 <code>overrides</code> 里新增对 <code>.js</code> 的处理：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 支持浏览器环境</span>
    <span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 识别 CommonJS</span>
    <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 识别 ES 的代码，使用 ECMAScript 2021 自动设置 ecmaVersion parser 为 12，</span>
    <span class="token literal-property property">es2021</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;eslint:recommended&quot;</span><span class="token punctuation">,</span> <span class="token comment">// eslint 自己的推荐规则，最佳实践最小集</span>
    <span class="token string">&quot;plugin:prettier/recommended&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 eslint 关于代码的风格的规则，使用 prettier 的风格</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">overrides</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 处理 JS 文件</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">files</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;**/*.{js,jsx}&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 只处理 js 和 jsx 文件</span>
      <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&quot;@babel/eslint-parser&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 使用 babel 来解析 js 文件</span>
      <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 支持 import/export</span>
        <span class="token literal-property property">allowImportExportEverywhere</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">ecmaFeatures</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">globalReturn</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 处理 TS 文件</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">files</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;**/*.{ts,tsx}&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 只处理 ts 和 js 文件</span>
      <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 能看懂 TypeScript</span>
      <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">project</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./tsconfig.json&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 告诉 eslint：tsconfig 在哪</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// typescript-eslint 的推荐规则，只是这些最佳规则都是针对 TS 的</span>
        <span class="token string">&quot;plugin:@typescript-eslint/recommended&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// tsconfig.json 里 Type Checking 的推荐规则</span>
        <span class="token string">&quot;plugin:@typescript-eslint/recommended-requiring-type-checking&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 使用 typescript x eslint 的插件</span>
        <span class="token string">&quot;@typescript-eslint&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="eslint-x-react"><a href="#eslint-x-react" class="header-anchor">#</a> ESLint x React</h2> <p>解析 React 文件主要有两大难题：</p> <ul><li>不识别 <code>import React from 'react'</code>，会报 <code>React is not used</code></li> <li>不识别 <code>.jsx</code>, <code>.tsx</code> 文件</li></ul> <p>如果你的项目是 React + TypeScript，那么要在 <code>tsconfig.json</code> 里添加对 JSX 的支持：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后在 <code>overrides</code> 里也添加对 <code>.js</code> 和 <code>.jsx</code> 的解析：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">overrides</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">files</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;**/*.{jsx,js,ts,tsx}&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token operator">...</span>ESLint x TypeScript 配置
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>因为 ESLint 这里会 TypeScript 的 parser 结合 <code>tsconfig.json</code> 来解析 <code>.js</code> 和 <code>.jsx</code>，所以 ESLint 是能看懂 <code>.jsx</code> 的内容的。</p> <p>那如果项目是 React + JavaScript 呢？或者我就要分开处理 TypeScript 和 JavaScript 呢？我们难道要用 React Parser 么？<strong>No！我们需要的是 ESLint x React 的插件！个人理解 JSX 更属于 JavaScript 的一种特性，而不是语法类型，所以要用 Plugin。</strong></p> <p>遵循刚刚说的规律，我们安装 <a href="https://www.npmjs.com/package/eslint-plugin-react" target="_blank" rel="noopener noreferrer">eslint-plugin-react<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i D eslint-plugin-react
</code></pre></div><p>最后只需继承它即可，注意这里的 <code>extends</code> 大部分时候都可以是 <code>plugin</code> 的缩写版本：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string-property property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;eslint:recommended&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;plugin:react/recommended&quot;</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="eslint-x-vue"><a href="#eslint-x-vue" class="header-anchor">#</a> ESLint x Vue</h2> <p>Vue 和 React 同理，它只需要一个 <a href="https://eslint.vuejs.org/" target="_blank" rel="noopener noreferrer">eslint-plugin-vue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i -D eslint-plugin-vue
</code></pre></div><p>我们依然可以在 <code>overrides</code> 中新增一条只针对 <code>.vue</code> 文件的配置：</p> <div class="language-json extra-class"><pre class="language-json"><code>overrides<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token comment">// 处理 vue 文件</span>
  <span class="token punctuation">{</span>
    files<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;**/*.vue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 只处理 vue 文件</span>
    extends<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;plugin:vue/vue3-recommended&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 使用 vue3 的推荐规则</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>这样就可以对所有 <code>.vue</code> 文件执行 <code>eslint '**/*.vue' --fix</code> 了。</p> <h2 id="extends-和-plugins-的区别"><a href="#extends-和-plugins-的区别" class="header-anchor">#</a> <code>extends</code> 和 <code>plugins</code> 的区别</h2> <p>不知道你有没有在刚刚配置 eslint 的时候，有两个配置项一直很让人迷惑：<code>extends</code> 以及 <code>plugins</code>。</p> <p>举个例子，我们要配置 eslint x typescript，可以看到官网有这样的配置：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">'@typescript-eslint/parser'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'@typescript-eslint'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'eslint:recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:@typescript-eslint/recommended'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>神奇的是，当你去掉 <code>plugins</code> 之后发现 <code>eslint</code> 依然可以正常工作。更神奇的是，只要你写了 <code>extends</code>，那么连 <code>parser</code> 也可以不用加，要知道没有指定 <code>parser</code> 选项，eslint 可看不懂你的 TypeScript 文件。</p> <p>所以说，到底是 <code>plugins</code> 加上了 TypeScript 的能力还是 <code>extends</code> 加上了 TypeScript 的规则呢？真让人头大，直到终于有一天受不了了，翻找了一下网上的资料发现了<a href="https://stackoverflow.com/questions/61528185/eslint-extends-vs-plugins-v2020" target="_blank" rel="noopener noreferrer">这个帖子<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>先来说结论吧：<strong>每个 <code>plugins</code> 只是开启了这个插件，而 <code>extends</code> 则会继承别人写好的一份 <code>.eslintrc</code> 的配置，这份配置不仅仅包括了 <code>rules</code> 还有 <code>parser</code>，<code>plugins</code> 之类的东西。</strong></p> <p>所以回到问题，为什么在继承了 <code>plugin:@typescript-eslint/recommended</code> 之后就可以不写 <code>plugins</code> 和 <code>parser</code> 呢？因为别人已经把配置都放在 <code>recommended</code> 这份配置表里了，这样对使用的人来说，就可以少写很多配置项了。</p> <p>也就是说，下面两份配置是等价的：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@typescript-eslint&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;@typescript-eslint/explicit-function-return-type&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">allowExpressions</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以及</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;plugin:@typescript-eslint/recommended&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;@typescript-eslint/explicit-function-return-type&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">allowExpressions</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>对于第一份配置：</p> <ul><li>需要手动添加 <code>parser</code>, <code>parserOptions</code>, <code>plugins</code></li> <li>只开启了 <code>@typescript-eslint/explicit-function-return-type</code> 一个规则</li></ul> <p>对于第二份配置：</p> <ul><li><code>plugin:@typescript-eslint/recommended</code> 自动添加了 <code>parser</code>, <code>parserOptions</code>, <code>plugins</code></li> <li>一些推荐的 TypeScript ESLint 规则也自动加上了</li> <li>只对 <code>@typescript-eslint/explicit-function-return-type</code> 这个规则进行自定义配置</li></ul> <h2 id="考考你"><a href="#考考你" class="header-anchor">#</a> 考考你</h2> <p>看到这，你的 <code>.eslintrc.js</code> 应该已经写了不少代码了，当然相信你也能慢慢找到 <code>eslint</code>, <code>plugin</code>, <code>config</code>, <code>prettier</code>, <code>parser</code> 这些关键词之间排列组合的一些规律了。</p> <p>不妨来考考你：</p> <ul><li>我要用 XXX 公司的 ESLint 规则集，应该找哪个名字的 NPM 包？</li> <li>我要解析 YYY 语法，应该搜哪个 NPM 包呢？</li> <li>要屏蔽 XXLint 工具和 Prettier 冲突的规则，应该用哪个 NPM 包？</li> <li>要让处理 <code>.xxx</code> 后缀的文件，应该用到哪些 NPM 包呢？</li></ul> <p>如果你对上面的问题都能做到心中有数，那配置 <a href="https://stylelint.io/user-guide/configure/" target="_blank" rel="noopener noreferrer">StyleLint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 就再简单不过了。实际上无论是哪个 xxlint 他们的 NPM 命名规律都是非常类似的。话不多出，马上开始学习下一章吧~</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/13/2022, 7:24:23 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/linter-tutorial/practice/eslint_typescript.html" class="prev">
        👮‍♂️ ESLint x TypeScript
      </a></span> <span class="next"><a href="/linter-tutorial/practice/stylelint.html">
        🧜‍♀️ StyleLint
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/linter-tutorial/assets/js/app.ac6c6909.js" defer></script><script src="/linter-tutorial/assets/js/2.974bf6c6.js" defer></script><script src="/linter-tutorial/assets/js/10.aaf88866.js" defer></script>
  </body>
</html>
